# ConfigMap for mount-monitor sidecar configuration
# Uses JSON config file format to exercise the JSON config parsing code path
# and demonstrate per-mount configuration capabilities

apiVersion: v1
kind: ConfigMap
metadata:
  name: mount-monitor-config
  namespace: mount-monitor-dev
  labels:
    app.kubernetes.io/name: mount-monitor
    app.kubernetes.io/component: dev-environment
    app.kubernetes.io/part-of: debrid-mount-monitor
data:
  # JSON configuration file - mounted as /etc/mount-monitor/config.json
  config.json: |
    {
      "checkInterval": "10s",
      "readTimeout": "5s",
      "shutdownTimeout": "30s",
      "failureThreshold": 3,
      "httpPort": 8080,
      "logLevel": "debug",
      "logFormat": "json",
      "canaryFile": ".health-check",
      "mounts": [
        {
          "name": "test-mount",
          "path": "/mnt/test",
          "canaryFile": ".health-check",
          "failureThreshold": 3
        }
      ]
    }
